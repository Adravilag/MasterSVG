<body>
  <div class="container">
    <header class="header">
      <div class="header-left">
        <span class="icon-name" id="iconName">${name}</span>
        <button class="rename-btn" onclick="renameIcon()" title="Rename Icon">
          <span class="codicon codicon-edit"></span>
        </button>
        <span class="badge">Editor</span>
        ${isBuilt ? '<span class="badge badge-built">BUILT</span>' : ''}
      </div>
      <div class="header-right">
        <span class="badge badge-anim" id="animBadge" style="display: none;">
           <span class="codicon codicon-play"></span> <span id="animName"></span>
        </span>
        <span class="badge badge-optimized" id="optimizedBadge" style="display: none;">
           <span class="codicon codicon-rocket"></span> Optimized
        </span>
        <span class="file-size" id="fileSize">${fileSizeStr}</span>
      </div>
    </header>
    
    <div class="main-content">
      <!-- Left Column - Preview -->
      <div class="left-column">
        <div class="preview-code-container" id="previewCodeContainer">
          <div class="preview-section">
            <div class="preview-box zoom-3" id="previewBox">
              <div class="animation-indicator" id="animationIndicator" style="display: none;">
                <span class="codicon codicon-play"></span>
              </div>
              <div id="zoomContainer" style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; transition: transform 0.2s ease;">
                ${displaySvg}
              </div>
            </div>
          </div>
        </div>
        <div class="zoom-controls">
          <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">
            <span class="codicon codicon-zoom-out"></span>
          </button>
          <span class="zoom-level" id="zoomLevel">100%</span>
          <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">
            <span class="codicon codicon-zoom-in"></span>
          </button>
          <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">
            <span class="codicon codicon-screen-normal"></span>
          </button>
          <span class="zoom-separator"></span>
          <button class="zoom-btn restart-anim-btn" id="restartAnimBtn" onclick="restartAnimation()" title="Restart Animation" style="display: none;">
            <span class="codicon codicon-debug-restart"></span>
          </button>
        </div>
        
        <!-- Actions Toolbar -->
        <div class="actions-section">
          <button class="action-btn warning" onclick="rebuild()" title="Build Icons">
            <span class="codicon codicon-sync"></span>
          </button>
          <button class="action-btn" onclick="copySvg()" title="Copy SVG">
            <span class="codicon codicon-copy"></span>
          </button>
          <button class="action-btn optimize-btn" id="optimizeBtn" onclick="optimizeSvg('safe')" title="Optimize SVG (SVGO)">
            <span class="codicon codicon-rocket"></span>
          </button>
        </div>
        
        <!-- Optimize Result (shows after optimization) -->
        <div class="optimize-result-bar" id="optimizeResultBar" style="display: none;">
          <div class="optimize-info">
            <span class="optimize-savings-badge" id="optimizeSavingsText">--%</span>
            <span class="optimize-size-text" id="optimizeSizeText"></span>
          </div>
          <div class="optimize-build-hint" id="optimizeBuildHint">
            <span class="codicon codicon-arrow-right"></span>
            <span>Apply on Build</span>
          </div>
          <div class="optimize-bar-actions" id="optimizeBarActions">
            <button class="mini-btn" id="btnRevertOptimized" onclick="revertOptimized()" title="Discard optimization" style="display: none;">
              <span class="codicon codicon-close"></span>
            </button>
          </div>
        </div>


      </div>
      
      <!-- Right Column - Controls -->
      <div class="right-column">
        <div class="tabs-container">
          <div class="tabs-header">
            <button class="tab-btn active" onclick="switchTab('color')">
              <span class="codicon codicon-symbol-color"></span> Color
            </button>
            <button class="tab-btn" onclick="switchTab('animation')">
              <span class="codicon codicon-play"></span> Animation
            </button>
            <button class="tab-btn" onclick="switchTab('code')">
              <span class="codicon codicon-code"></span> Code
            </button>
          </div>
          
          <!-- Color Tab -->
          <div class="tab-content active" id="tab-color">
            ${colorTabContent}
          </div>
          
          <!-- Animation Tab -->
          <div class="tab-content" id="tab-animation">
            ${animationTabContent}
          </div>
        
          <!-- Code Tab -->
          <div class="tab-content" id="tab-code">
            ${codeTabContent}
          </div>
        </div>
      </div>
    </div>
  </div>
